# AliSchool

### 代码思路

首先设置了NC、Vm类，方便对其进行操作，设置了c1_NC、g1_NC、r1_NC分别代表三类NC服务器的集群。

初始化设置**30台NT-1-2，30台NT-1-4，5台NT-1-8服务器**，并分别加入c1,g1,r1集群中。

程序首先读取所有的数据文件，将数据首行日期作为开始时间，末尾行日期作为结束时间，对其中的每一天进行遍历。

对一天中的每一份订单按照顺序，进行如下操作：

1. 检查对应类型服务器中剩余资源是否充足建立此Vm
2. 若不充足，当做断供，计算断供损失。若充足，则创建此Vm对象，将其添加进对应NC对象中，且减少此NC对象中相应资源消耗。

将当日订单全部按照上述流程遍历完成后，再统一进行维护费用、收益的核算，以及判断是否需要进行报备。

#### 维护费用：

遍历三个集群中的 当日所有状态为free的服务器，累加其CPU核心数，维护费用=CPU数*3.6

在遍历过程中顺便一起计算出每类服务器的剩余可用Memory，用作报备决策的基础。

#### 收益：

遍历当日所有NC中存储的Vm对象，对每个计算其当日收益，并检查其结束日期，若结束日期就是当日，则将该Vm对象从NC中移除。

#### 报备决策：

根据前面计算出的每类服务器的剩余可用Memory大小，决定不同类服务器的报备数目。剩余可用Memory越小，报备数目越大。



对每一天进行如上操作，累计即可计算出平均收益率等。
